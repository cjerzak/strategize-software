% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CS_Validate_Equilibrium.R
\name{validate_equilibrium}
\alias{validate_equilibrium}
\title{Validate Nash Equilibrium Quality}
\usage{
validate_equilibrium(
  result,
  method = c("grid", "gradient"),
  resolution = 50,
  tolerance = 0.01,
  nMonte = 100,
  plot = TRUE,
  verbose = TRUE,
  seed = 1L
)
}
\arguments{
\item{result}{Output from \code{\link{strategize}} with \code{adversarial = TRUE}}

\item{method}{Character string specifying the search method:
\itemize{
  \item \code{"grid"}: Grid search around the current solution (deterministic
    for 1-2 parameters; random sampling for higher dimensions)
  \item \code{"gradient"}: Gradient ascent from current solution (faster)
}
Default is \code{"grid"}.}

\item{resolution}{Integer. Number of grid points per dimension for grid search.
Default is 50.}

\item{tolerance}{Numeric. Maximum BR error to consider as equilibrium.
Default is 0.01 (i.e., neither player can improve vote share by more than 1\%).}

\item{nMonte}{Integer. Number of Monte Carlo samples for Q evaluation.
This overrides the Monte Carlo settings stored in \code{result} for
the duration of this validation call. Default is 100.}

\item{plot}{Logical. Whether to generate visualization. Default is \code{TRUE}.}

\item{verbose}{Logical. Whether to print progress messages. Default is \code{TRUE}.}

\item{seed}{Integer seed for reproducible Monte Carlo evaluation and
deterministic search behavior. Use \code{NULL} for non-deterministic
behavior. Default is 1.}
}
\value{
A list containing:
  \describe{
    \item{br_error_ast}{Best-response error for AST player (how much AST
      could improve by switching to best response)}
    \item{br_error_dag}{Best-response error for DAG player}
    \item{is_equilibrium}{Logical. TRUE if both errors are below tolerance}
    \item{Q_current}{Current objective value at the solution}
    \item{Q_br_ast}{Objective value if AST switched to best response}
    \item{Q_br_dag}{Objective value if DAG switched to best response}
    \item{br_strategy_ast}{The best response strategy for AST (for comparison)}
    \item{br_strategy_dag}{The best response strategy for DAG}
    \item{nMonte}{Monte Carlo sample count used for validation}
    \item{seed}{Seed used for deterministic evaluation (if provided)}
    \item{plot}{ggplot object if plot=TRUE and ggplot2 available, else NULL}
  }
}
\description{
Computes best-response error to verify that the optimized strategies
form a Nash equilibrium. At a true Nash equilibrium, neither player
can improve their payoff by unilaterally changing strategy.
}
\details{
\strong{What is a Nash Equilibrium?}

In the adversarial setting, two parties (AST and DAG) simultaneously choose
probability distributions over candidate attributes (e.g., gender, age, policy
positions). Each party wants to maximize their expected vote share given the
opponent's strategy. A Nash equilibrium is a pair of strategies where:
\itemize{
  \item AST's strategy is optimal given DAG's strategy
  \item DAG's strategy is optimal given AST's strategy
}
At equilibrium, neither party can improve by unilaterally changing their strategy.

\strong{What is Best-Response Error?}

The best-response error measures how far a player's current strategy is from
being optimal. For player p, it is defined as:
\deqn{BR\_error_p = \max_{\pi_p} Q(\pi_p, \pi^*_{-p}) - Q(\pi^*_p, \pi^*_{-p})}

In words: if we fix the opponent's strategy and search for the best possible
response, how much better could we do compared to our current strategy?

\itemize{
  \item \strong{BR error = 0}: The player is already playing optimally (true equilibrium)
  \item \strong{BR error > 0}: The player could improve by switching strategies
  \item \strong{BR error = 0.05}: The player could gain 5 percentage points in vote share
}

\strong{How Validation Works}

This function performs the following steps:
\enumerate{
  \item Evaluates Q (expected vote share) at the current solution
  \item For AST: fixes DAG's strategy and searches for AST's best response
  \item For DAG: fixes AST's strategy and searches for DAG's best response
  \item Computes the improvement each player could achieve (BR error)
  \item If both BR errors are below tolerance, declares it a valid equilibrium
}

\strong{Interpretation}

\itemize{
  \item \code{is_equilibrium = TRUE}: The solution is a valid Nash equilibrium
    (within numerical tolerance). Both parties are playing optimally.
  \item \code{is_equilibrium = FALSE}: At least one party could improve by
    changing strategy. This may indicate insufficient SGD iterations, a local
    minimum, or numerical issues.
}

\strong{Search Methods}

\itemize{
  \item \code{"grid"}: Searches over a discretized grid of strategies around
    the current solution. More thorough but slower. Recommended for validation.
  \item \code{"gradient"}: Runs additional gradient ascent steps from the
    current solution. Faster but may miss improvements in other directions.
}
}
\examples{
\dontrun{
# Run adversarial strategize
result <- strategize(Y = y, W = w, adversarial = TRUE, nSGD = 500)

# Validate equilibrium
validation <- validate_equilibrium(result)
print(validation$is_equilibrium)
print(validation$br_error_ast)
print(validation$br_error_dag)

# If validation fails, try more SGD iterations
if (!validation$is_equilibrium) {
  result2 <- strategize(Y = y, W = w, adversarial = TRUE, nSGD = 2000)
  validation2 <- validate_equilibrium(result2)
}
}

}
